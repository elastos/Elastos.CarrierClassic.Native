diff -ruN libcrystal-master/src/CMakeLists.txt libcrystal-master-mod/src/CMakeLists.txt
--- libcrystal-master/src/CMakeLists.txt	2018-08-08 20:46:33.000000000 +0800
+++ libcrystal-master-mod/src/CMakeLists.txt	2018-08-22 17:37:17.000000000 +0800
@@ -138,6 +138,16 @@
 endif()
 
 if(ENABLE_SHARED)
+    if(APPLE)
+        set(CMAKE_INSTALL_RPATH "@execuable_path/Frameworks;@loader_path/Frameworks")
+        set(CMAKE_MACOSX_RPATH "${CMAKE_INSTALL_PREFIX}/lib")
+    endif()
+    set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
+    set(CMAKE_BUILD_WITH_INSTALL_NAME_DIR TRUE)
+    set(CMAKE_INSTALL_NAME_DIR "@rpath")
+    set(CMAKE_SHARED_LIBRARY_RUNTIME_C_FLAG "-Wl,-rpath,")
+    set(CMAKE_SHARED_LIBRARY_RUNTIME_C_FLAG_SEP ":")
+
     add_library(crystal-shared SHARED ${SRC})
     target_compile_definitions(crystal-shared PRIVATE CRYSTAL_DYNAMIC)
     set_target_properties(crystal-shared PROPERTIES OUTPUT_NAME crystal)
